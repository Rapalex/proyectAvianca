2. -- CREATE TABLESPACE
a.
CREATE TABLESPACE AVIANCA
DATAFILE 'D:\Avianca\AVIANCADATAFILE.dat' SIZE 2G
ONLINE;

b.
CREATE UNDO TABLESPACE UNDOAVIANCA
DATAFILE 'D:\Avianca\AVIANCAUNDODATAFILE.dat' SIZE 25M
AUTOEXTEND ON;


3.
ALTER SYSTEM SET UNDO_TABLESPACE=UNDOAVIANCA SCOPE = BOTH


4.
--DBA AVIANCA

CREATE USER DBA_AVIANCA
    IDENTIFIED BY DBA_AVIANCA
    DEFAULT TABLESPACE AVIANCA
    QUOTA UNLIMITED ON AVIANCA;


5.
--CREATE PROFILES

CREATE PROFILE CLERK LIMIT
    PASSWORD_LIFE_TIME 40
    SESSIONS_PER_USER 1
    IDLE_TIME 10
    FAILED_LOGIN_ATTEMPTS 4;

CREATE PROFILE DEVELOPMENT LIMIT
    PASSWORD_LIFE_TIME 100
    SESSIONS_PER_USER 2
    IDLE_TIME 30
    FAILED_LOGIN_ATTEMPTS UNLIMITED;

6.
--CREATE USERS

CREATE USER RAPALEX
    IDENTIFIED BY 123456
    DEFAULT TABLESPACE AVIANCA 
    QUOTA UNLIMITED ON AVIANCA
    PROFILE DEVELOPMENT;
    
CREATE USER YONERIC
    IDENTIFIED BY 123456
    DEFAULT TABLESPACE AVIANCA 
    QUOTA UNLIMITED ON AVIANCA
    PROFILE DEVELOPMENT;
    
CREATE USER ADMIN1
    IDENTIFIED BY 123456
    DEFAULT TABLESPACE AVIANCA 
    QUOTA UNLIMITED ON AVIANCA
    PROFILE CLERK;    
    
CREATE USER ADMIN2
    IDENTIFIED BY 123456
    DEFAULT TABLESPACE AVIANCA 
    QUOTA UNLIMITED ON AVIANCA
    PROFILE CLERK;

7.
--LOCK A USER WITH CLERK PROFILE

ALTER USER ADMIN2 ACCOUNT LOCK;

8.
--CREATE MODEL
CREATE TABLE STATUS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE EMPLOYEES_TYPES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE ENGLISH_LEVELS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE LICENSE_TYPES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE PILOT_POSITIONS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE EMPLOYEES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL,
    GENDER CHAR(1),
    BORN_DATE DATE NOT NULL,
    ANTIQUITY NUMERIC,
    TRAINING_DATE DATE,
    ADDRESS VARCHAR(255),
    EMAIL VARCHAR(255),
    CELLPHONE_NUMBER VARCHAR(30),
    REST_HOURS NUMERIC,
    FLIGHT_HOURS NUMERIC,
    ID_STATUS NUMERIC,
    ID_ENGLISH_LEVELS NUMERIC,
    ID_EMPLOYEE_TYPE NUMERIC,
    ID_LICENSE_TYPES NUMERIC,
    ID_PILOT_POSITION NUMERIC,

    CONSTRAINT FK_EMPLOYEE_STATUS FOREIGN KEY (ID_STATUS) REFERENCES STATUS(ID),
    CONSTRAINT FK_EMPLOYEE_ENGLISH_LEVEL FOREIGN KEY (ID_ENGLISH_LEVELS) REFERENCES ENGLISH_LEVELS(ID),
    CONSTRAINT FK_EMPLOYEE_TYPE FOREIGN KEY (ID_EMPLOYEE_TYPE) REFERENCES EMPLOYEES_TYPES(ID),
    CONSTRAINT FK_EMPLOYEE_LICENSE_TYPE FOREIGN KEY (ID_LICENSE_TYPES) REFERENCES LICENSE_TYPES(ID),
    CONSTRAINT FK_EMPLOYEE_PILOT_POSITION FOREIGN KEY (ID_PILOT_POSITION) REFERENCES PILOT_POSITIONS(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE AIRPLANE_TYPES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    TYPE VARCHAR(255),
    BUSINESS_SEATS NUMERIC,
    ECONOMY_SEATS NUMERIC
)
TABLESPACE AVIANCA;

CREATE TABLE AIRPLANES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    REGISTRATION VARCHAR(255) NOT NULL,
    AIRPLANE_SERIAL VARCHAR(255),
    YEARS NUMERIC NULL,
    ID_AIRPLANE_TYPE NUMERIC,

    CONSTRAINT FK_AIRPLANE_TYPE FOREIGN KEY (ID_AIRPLANE_TYPE) REFERENCES AIRPLANE_TYPES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE COUNTRIES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE CITIES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255),
    ID_COUNTRY NUMERIC,

    CONSTRAINT FK_CITY_COUNTRY FOREIGN KEY (ID_COUNTRY) REFERENCES COUNTRIES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE AIRPORTS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    ABBREVIATION VARCHAR(255) NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    LATITUDE VARCHAR(255),
    LONGITUDE VARCHAR(255),
    ID_CITY NUMERIC,

    CONSTRAINT FK_AIRPORT_CITY FOREIGN KEY (ID_CITY) REFERENCES CITIES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE ROUTES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DISTANCE NUMERIC NOT NULL,
    ID_ORIGIN_AIRPORT NUMERIC,
    ID_DESTINATION_AIRPORT NUMERIC,

    CONSTRAINT FK_ORIGIN_AIRPORT FOREIGN KEY (ID_ORIGIN_AIRPORT) REFERENCES AIRPORTS(ID),
    CONSTRAINT FK_DESTINATION_AIRPORT FOREIGN KEY (ID_DESTINATION_AIRPORT) REFERENCES AIRPORTS(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE ROUTES_TYPES_AIRPLANES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    ID_ROUTE NUMERIC,
    ID_AIRPLANE_TYPE NUMERIC,

    CONSTRAINT FK_ROUTE_TYPE_AIRPLANE FOREIGN KEY (ID_ROUTE) REFERENCES ROUTES(ID),
    CONSTRAINT FK_TYPE_ROUTE_AIRPLANE FOREIGN KEY (ID_AIRPLANE_TYPE) REFERENCES AIRPLANE_TYPES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE DOCUMENT_TYPES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    DESCRIPTION VARCHAR(255)
)
TABLESPACE AVIANCA;

CREATE TABLE PASSENGERS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL,
    ID_NUMBER VARCHAR(255),
    ID_DOCUMENT_TYPE NUMERIC,
    ID_CITY NUMERIC,
    
    CONSTRAINT FK_PASSENGER_DOCUMENT_TYPE FOREIGN KEY (ID_DOCUMENT_TYPE) REFERENCES DOCUMENT_TYPES(ID),
    CONSTRAINT FK_PASSENGER_CITY FOREIGN KEY (ID_CITY) REFERENCES CITIES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE ITINERARIES(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    FLIGHT_NUMBER VARCHAR(25) NOT NULL,
    AVERAGE_HOURS NUMERIC,
    FLIGHT_DATE DATE,
    DAY VARCHAR(25),
    HOUR VARCHAR(35),
    WEEKLY_FREQUENCY NUMERIC,
    ID_ROUTE NUMERIC,
    ID_AIRPLANE NUMERIC,
    
    CONSTRAINT FK_ITINERARY_ROUTE FOREIGN KEY (ID_ROUTE) REFERENCES ROUTES(ID),
    CONSTRAINT FK_ITINERARY_AIRPLANE FOREIGN KEY (ID_AIRPLANE) REFERENCES AIRPLANES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE CONFIRMED_FLIGHTS(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    ESTIMATED_DEPARTURE_TIME VARCHAR(35),
    ESTIMATED_ARRIVAL_TIME VARCHAR(35),
    REAL_DEPARTURE_TIME VARCHAR(35),
    REAL_ARRIVAL_TIME VARCHAR(35),
    REAL_DURATION NUMERIC,
    NUMBER_PASSENGERS NUMERIC,
    ID_ITINERARY NUMERIC,
    ID_EMPLOYEE_PILOT NUMERIC,
    ID_EMPLOYEE_COPILOT NUMERIC,
    
    CONSTRAINT FK_CONFIRMED_FLIGHT_ITINERARY FOREIGN KEY (ID_ITINERARY) REFERENCES ITINERARIES(ID),
    CONSTRAINT FK_CONFIRMED_FLIGHT_COPILOT FOREIGN KEY (ID_EMPLOYEE_PILOT) REFERENCES EMPLOYEES(ID),
    CONSTRAINT FK_CONFIRMED_FLIGHT_PILOT FOREIGN KEY (ID_EMPLOYEE_COPILOT) REFERENCES EMPLOYEES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE ASSITANTS_CONFIRMED(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    ID_CONFIRMED_FLIGHT NUMERIC,
    ID_ASSISTANT_EMPLOYEE NUMERIC,
    
    CONSTRAINT FK_ASSISTANT_CONFIRMED FOREIGN KEY (ID_CONFIRMED_FLIGHT) REFERENCES CONFIRMED_FLIGHTS(ID),
    CONSTRAINT FK_CONFIRMED_EMPLOYEE FOREIGN KEY (ID_ASSISTANT_EMPLOYEE) REFERENCES EMPLOYEES(ID)
)
TABLESPACE AVIANCA;

CREATE TABLE CHECK_IN(
    ID NUMERIC GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
    EMERGENCY_CONTACT VARCHAR(255) NOT NULL,
    CONTACT_EMAIL VARCHAR(255),
    CELLPHONE_NUMBER VARCHAR(30),
    ID_CITY NUMERIC,
    ID_PASSENGER NUMERIC,
    ID_CONFIRMED_FLIGHT NUMERIC,

    CONSTRAINT FK_CHECK_IN_CONFIRMED_FLIGHT FOREIGN KEY (ID_CONFIRMED_FLIGHT) REFERENCES CONFIRMED_FLIGHTS(ID),
    CONSTRAINT FK_CHECK_IN_CITY FOREIGN KEY (ID_CITY) REFERENCES CITIES(ID),
    CONSTRAINT FK_CHECK_IN_PASSENGER FOREIGN KEY (ID_PASSENGER) REFERENCES PASSENGERS(ID)
)
TABLESPACE AVIANCA;
